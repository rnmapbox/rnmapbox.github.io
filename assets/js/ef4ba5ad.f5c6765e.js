"use strict";(self.webpackChunkmap_docs=self.webpackChunkmap_docs||[]).push([[2175],{2720:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=e(5893),a=e(1151);const i={title:"Show Point Annotations",tags:["PointAnnotation","MapView#deselectAnnotationOnTap","PointAnnotation#refresh","getAnnotationsLayerID"],custom_props:{example_rel_path:"Annotations/ShowPointAnnotation.tsx"},custom_edit_url:"https://github.com/rnmapbox/maps/tree/master/example/src/examples/Annotations/ShowPointAnnotation.tsx"},r=void 0,s={id:"examples/Annotations/ShowPointAnnotation",title:"Show Point Annotations",description:"Shows Point annotation with images",source:"@site/docs/examples/Annotations/ShowPointAnnotation.md",sourceDirName:"examples/Annotations",slug:"/examples/Annotations/ShowPointAnnotation",permalink:"/docs/examples/Annotations/ShowPointAnnotation",draft:!1,unlisted:!1,editUrl:"https://github.com/rnmapbox/maps/tree/master/example/src/examples/Annotations/ShowPointAnnotation.tsx",tags:[{inline:!0,label:"PointAnnotation",permalink:"/docs/tags/point-annotation"},{inline:!0,label:"MapView#deselectAnnotationOnTap",permalink:"/docs/tags/map-view-deselect-annotation-on-tap"},{inline:!0,label:"PointAnnotation#refresh",permalink:"/docs/tags/point-annotation-refresh"},{inline:!0,label:"getAnnotationsLayerID",permalink:"/docs/tags/get-annotations-layer-id"}],version:"current",frontMatter:{title:"Show Point Annotations",tags:["PointAnnotation","MapView#deselectAnnotationOnTap","PointAnnotation#refresh","getAnnotationsLayerID"],custom_props:{example_rel_path:"Annotations/ShowPointAnnotation.tsx"},custom_edit_url:"https://github.com/rnmapbox/maps/tree/master/example/src/examples/Annotations/ShowPointAnnotation.tsx"},sidebar:"examplesSidebar",previous:{title:"Point Annotation Anchors",permalink:"/docs/examples/Annotations/PointAnnotationAnchors"},next:{title:"CacheManagement",permalink:"/docs/examples/CacheManagement/"}},l={},c=[];function d(n){const t={code:"code",img:"img",p:"p",pre:"pre",...(0,a.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Shows Point annotation with images"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:"import React, { useRef, useState } from 'react';\nimport { View, Text, StyleSheet, Image } from 'react-native';\nimport {\n  Callout,\n  Camera,\n  FillLayer,\n  MapView,\n  PointAnnotation,\n  ShapeSource,\n  getAnnotationsLayerID,\n} from '@rnmapbox/maps';\nimport { Point, Position } from 'geojson';\nimport { Button } from '@rneui/base';\n\nimport Bubble from '../common/Bubble';\nimport { ExampleWithMetadata } from '../common/ExampleMetadata'; // exclude-from-doc\n\nconst ANNOTATION_SIZE = 40;\n\nconst styles = {\n  annotationContainer: {\n    alignItems: 'center',\n    backgroundColor: 'white',\n    borderColor: 'rgba(0, 0, 0, 0.45)',\n    borderRadius: ANNOTATION_SIZE / 2,\n    borderWidth: StyleSheet.hairlineWidth,\n    height: ANNOTATION_SIZE,\n    justifyContent: 'center',\n    overflow: 'hidden',\n    width: ANNOTATION_SIZE,\n  },\n  matchParent: {\n    flex: 1,\n  },\n} as const;\n\ntype AnnotationWithRemoteImageProps = {\n  id: string;\n  title: string;\n  coordinate: Position;\n};\n\nconst AnnotationWithRemoteImage = ({\n  id,\n  coordinate,\n  title,\n}: AnnotationWithRemoteImageProps) => {\n  const pointAnnotation = useRef<PointAnnotation>(null);\n\n  return (\n    <PointAnnotation\n      id={id}\n      coordinate={coordinate}\n      title={title}\n      draggable\n      onSelected={(feature) =>\n        console.log('onSelected:', feature.id, feature.geometry.coordinates)\n      }\n      onDrag={(feature) =>\n        console.log('onDrag:', feature.id, feature.geometry.coordinates)\n      }\n      onDragStart={(feature) =>\n        console.log('onDragStart:', feature.id, feature.geometry.coordinates)\n      }\n      onDragEnd={(feature) =>\n        console.log('onDragEnd:', feature.id, feature.geometry.coordinates)\n      }\n      ref={pointAnnotation}\n    >\n      <View style={styles.annotationContainer}>\n        <Image\n          source={{ uri: 'https://reactnative.dev/img/tiny_logo.png' }}\n          style={{ width: ANNOTATION_SIZE, height: ANNOTATION_SIZE }}\n          onLoad={() => pointAnnotation.current?.refresh()}\n          // Prevent rendering bitmap at unknown animation state\n          fadeDuration={0}\n        />\n      </View>\n      <Callout title=\"This is a sample loading a remote image\" />\n    </PointAnnotation>\n  );\n};\n\nconst ShowPointAnnotation = () => {\n  const [coordinates, setCoordinates] = useState([\n    [-73.99155, 40.73581],\n    [-73.99155, 40.73681],\n  ]);\n  const [layerRendering, setLayerRendering] = useState<'below' | 'above'>(\n    'below',\n  );\n\n  const renderAnnotations = () => {\n    const items = [];\n\n    for (let i = 0; i < coordinates.length; i++) {\n      const coordinate = coordinates[i];\n\n      const title = `Lon: ${coordinate[0]} Lat: ${coordinate[1]}`;\n      const id = `pointAnnotation${i}`;\n\n      if (i % 2 === 1) {\n        items.push(\n          null,\n          <AnnotationWithRemoteImage\n            key={id}\n            id={id}\n            coordinate={coordinate}\n            title={title}\n          />,\n        );\n      } else {\n        items.push(\n          null,\n          <PointAnnotation\n            key={id}\n            id={id}\n            coordinate={coordinate}\n            title={title}\n          >\n            <View style={styles.annotationContainer} />\n            <Callout title=\"This is an empty example\" />\n          </PointAnnotation>,\n        );\n      }\n    }\n\n    return items;\n  };\n\n  return (\n    <>\n      <MapView\n        onPress={(feature) => {\n          setCoordinates((prevState) => [\n            ...prevState,\n            (feature.geometry as Point).coordinates,\n          ]);\n        }}\n        style={styles.matchParent}\n        deselectAnnotationOnTap={true}\n      >\n        <Camera\n          defaultSettings={{ centerCoordinate: coordinates[0], zoomLevel: 16 }}\n        />\n\n        {renderAnnotations()}\n\n        <ShapeSource\n          id=\"polygon\"\n          shape={{\n            coordinates: [\n              [\n                [-73.98813787946587, 40.73199795542578],\n                [-73.98313197853199, 40.7388685230859],\n                [-73.98962548210226, 40.74155214586244],\n                [-73.9945841575561, 40.73468185536569],\n                [-73.98813787946587, 40.73199795542578],\n              ],\n            ],\n            type: 'Polygon',\n          }}\n        >\n          <FillLayer\n            id=\"polygon\"\n            {...{\n              [layerRendering + 'LayerID']:\n                getAnnotationsLayerID('PointAnnotations'),\n            }}\n            style={{\n              fillColor: 'rgba(255, 0, 0, 0.5)',\n              fillOutlineColor: 'red',\n            }}\n          />\n        </ShapeSource>\n      </MapView>\n\n      <Bubble>\n        <Text style={{ marginBottom: 10 }}>\n          Click to add a point annotation\n        </Text>\n        <Button\n          onPress={() =>\n            setLayerRendering(\n              (prevState) =>\n                (({ above: 'below', below: 'above' } as const)[prevState]),\n            )\n          }\n        >\n          Render Polygon {{ above: 'below', below: 'above' }[layerRendering]}\n        </Button>\n      </Bubble>\n    </>\n  );\n};\n\nexport default ShowPointAnnotation;\n\n\n"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.img,{alt:"ShowPointAnnotation.png",src:e(1901).Z+"",width:"295",height:"640"}),"}"]})]})}function m(n={}){const{wrapper:t}={...(0,a.a)(),...n.components};return t?(0,o.jsx)(t,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},1901:(n,t,e)=>{e.d(t,{Z:()=>o});const o=e.p+"assets/images/ShowPointAnnotation-7af9f3ebbdb8b88caed234519ab9f941.png"},1151:(n,t,e)=>{e.d(t,{Z:()=>s,a:()=>r});var o=e(7294);const a={},i=o.createContext(a);function r(n){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function s(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),o.createElement(i.Provider,{value:t},n.children)}}}]);